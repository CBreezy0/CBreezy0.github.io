<!DOCTYPE html>
<html lang="en">  <head>
    <meta charset="UTF-8">  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Transy Baseball Stats 2025</title>
    <style>
        /* Improved CSS for better readability and appearance */
        table {
            border-collapse: collapse;
            width: 100%;
            margin-bottom: 20px; /* Add space between tables */
            font-family: sans-serif; /* Use a more readable font */
        }

        th, td {
            border: 1px solid #ddd; /* Lighter border color */
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2; /* Add background color to header */
            font-weight: bold;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9; /* Add zebra striping */
        }
        .error-message {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <h1>Transy Baseball Stats 2025</h1>

    <p>
        <a href="TransylvaniaplayerStatsHitting0.csv" download>Download Hitting Stats</a> |
        <a href="TransylvaniaplayerStatsFielding1.csv" download>Download Fielding Stats</a> |
        <a href="TransylvaniaplayerStatsPitching2.csv" download>Download Pitching Stats</a>
    </p>

    <h2>Hitting Stats</h2>
    <div id="hittingTableContainer"></div>

    <h2>Fielding Stats</h2>
    <div id="fieldingTableContainer"></div>

    <h2>Pitching Stats</h2>
    <div id="pitchingTableContainer"></div>

    <script>
        // Use a more descriptive function name
        async function displayStatsTable(csvFileName, containerId) {
            try {
                const response = await fetch(csvFileName);
                if (!response.ok) {
                    throw new Error(`HTTP error ${response.status}: Could not fetch ${csvFileName}`);
                }
                const csvText = await response.text();
                const tableData = parseCSV(csvText);
                createTable(tableData, containerId);
            } catch (error) {
                console.error(error); // Log the full error object
                const container = document.getElementById(containerId);
                container.innerHTML = `<p class="error-message">Error loading ${csvFileName}: ${error.message}</p>`; //show error message
            }
        }

        function parseCSV(csvText) {
            const lines = csvText.split(/\r\n|\n/);
            const data = [];

            for (const line of lines) {
                if (line.trim() !== "") {
                   const values = line.split(',');
                    data.push(values);
                }
            }
            return data;
        }

        function createTable(data, containerId) {
            const tableContainer = document.getElementById(containerId);
            tableContainer.innerHTML = ''; // Clear previous content

            if (!data || data.length === 0) {
                tableContainer.innerHTML = '<p class="error-message">No data found.</p>';
                return;
            }

            const table = document.createElement('table');
            const thead = document.createElement('thead');
            const tbody = document.createElement('tbody');

            // Create table header
            const headerRow = document.createElement('tr');
            data[0].forEach(headerText => {
                const th = document.createElement('th');
                th.textContent = headerText; // No need to trim here, we do it later
                headerRow.appendChild(th);
            });
            thead.appendChild(headerRow);
            table.appendChild(thead);

            // Create table body
            for (let i = 1; i < data.length; i++) {
                const dataRow = document.createElement('tr');
                data[i].forEach(cellText => {
                    const td = document.createElement('td');
                    td.textContent = cellText;  // No need to trim here, we do it later
                    dataRow.appendChild(td);
                });
                tbody.appendChild(dataRow);
            }
            table.appendChild(tbody);

            tableContainer.appendChild(table);
        }


        // Fetch and display each CSV file (using more descriptive file names)
        displayStatsTable("TransylvaniaplayerStatsHitting0.csv", "hittingTableContainer");
        displayStatsTable("TransylvaniaplayerStatsFielding1.csv", "fieldingTableContainer");
        displayStatsTable("TransylvaniaplayerStatsPitching2.csv", "pitchingTableContainer");

    </script>
</body>
</html>
